<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Aplicação DashCam - Transforme o seu telemóvel Android numa câmara de painel profissional">
    <title>Aplicação DashCam - Manual do Utilizador</title>
    <link rel="icon" type="image/png" sizes="192x192" href="../../images/app-icon-192.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../images/app-icon-96.png">
    <link rel="icon" type="image/png" sizes="48x48" href="../../images/app-icon-48.png">
    <link rel="apple-touch-icon" href="../../images/app-icon-192.png">
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <img src="../../images/app-icon-96.png" alt="Ícone da Aplicação DashCam" class="app-icon">
                <div class="header-text">
                    <h1>Aplicação DashCam — Manual do Utilizador</h1>
                    <p class="subtitle">Versão 1.0.0 Beta | Android 8.0+ (API 26+) | Última Actualização: 30 de outubro de 2025</p>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="manual.html"  class="active">Manual do Utilizador</a></li>
            <li><a href="eula.html">Termos de Utilização</a></li>
            <li><a href="license.html">Licença</a></li>
            <li><a href="privacy-policy.html">Política de Privacidade</a></li>
        </ul>
    </nav>

    <div class="container">
        <section id="quick-start">
            <h2>Início Rápido</h2>
            <ol>
                <li><strong>Instalar e Executar:</strong> Conceda permissões de câmara, microfone e localização quando solicitado.</li>
                <li><strong>Fixe o Seu Telemóvel:</strong> Fixe-o de forma segura no pára-brisas em orientação horizontal, com a câmara traseira virada para a frente.</li>
                <li><strong>Ligue a Alimentação:</strong> Ligue a uma fonte de alimentação que liga com a ignição do seu automóvel (ACC). A aplicação inicia automaticamente a gravação quando é detectada alimentação e pára quando a alimentação é perdida.</li>
                <li><strong>Armazenamento:</strong> Os vídeos são guardados internamente por predefinição. Pode alterar para cartão SD ou armazenamento externo nas definições.</li>
                <li><strong>Carregamentos (Opcional):</strong> Configure carregamentos para o seu computador doméstico, NAS ou armazenamento na nuvem (Google Drive, OneDrive) via Wi-Fi.</li>
            </ol>
        </section>

        <hr>

        <section id="introduction">
            <h2>Introdução</h2>
            <p>A DashCam transforma um telemóvel Android antigo numa câmara de painel veicular fiável e com funcionalidades completas. Concebida para <strong>estabilidade, automatização e simplicidade</strong>, grava automaticamente quando o seu automóvel arranca e guarda ou carrega as suas gravações quando pára.</p>

            <h3>Principais Funcionalidades</h3>
            <ul>
                <li><strong>Gravação automática</strong> ligada à ignição ou detecção de impacto</li>
                <li><strong>Detecção de impacto</strong> com buffer de vídeo circular (guarda 2 min antes + 10 seg depois)</li>
                <li><strong>Telemetria abrangente:</strong> GPS, velocidade e registo de sensor de movimento de 6 eixos</li>
                <li><strong>Carregamentos flexíveis:</strong> Pasta partilhada do Windows (SMB/CIFS) ou nuvem (Google Drive, OneDrive)</li>
                <li><strong>Múltiplos formatos de saída:</strong> Vídeo MP4, legendas SRT, dados de sensores CSV, trajectos GPX</li>
                <li><strong>Gestão automática de armazenamento:</strong> Eliminação automática configurável quando o armazenamento está baixo</li>
                <li><strong>Carregamentos baseados em fila:</strong> Repetição automática com processamento em segundo plano</li>
                <li><strong>Credenciais seguras:</strong> Armazenamento encriptado via Android Keystore</li>
                <li><strong>Suporte NetBIOS:</strong> Utilize nomes de anfitrião do Windows em vez de endereços IP</li>
                <li><strong>Optimizado para bateria:</strong> Concebido para operação contínua com consumo mínimo de energia</li>
                <li><strong>Operação sem intervenção:</strong> Instale uma vez, conduza diariamente — não é necessária interacção</li>
            </ul>
        </section>

        <hr>

        <section id="getting-started">
            <h2>Primeiros Passos</h2>

            <h3>Permissões</h3>
            <p>Conceda estas permissões no primeiro arranque:</p>
            <ul>
                <li><strong>Câmara</strong> – Necessária para gravação de vídeo.</li>
                <li><strong>Microfone</strong> – Para captura de áudio nas gravações.</li>
                <li><strong>Localização</strong> – Para coordenadas GPS, registo de velocidade e detecção de SSID Wi-Fi (restrições de carregamento).</li>
                <li><strong>Armazenamento</strong> – (Android 9 e inferior) Para guardar gravações no dispositivo.</li>
            </ul>

            <h3>Optimização da Bateria</h3>
            <p>A DashCam solicitará <strong>isenção da optimização da bateria</strong> no primeiro arranque. Isto garante que a aplicação pode:</p>
            <ul>
                <li>Continuar a gravar quando o ecrã está desligado</li>
                <li>Concluir carregamentos após desligar a alimentação</li>
                <li>Monitorizar impactos no modo AUTO</li>
            </ul>
            <p>Pode verificar o estado da optimização da bateria em <strong>Definições → Definições do Sistema</strong>.</p>

            <h3>Fixar o Seu Telemóvel</h3>
            <ul>
                <li>Utilize um <strong>suporte de pára-brisas ou tablier</strong> com uma vista estável para a frente.</li>
                <li>Mantenha os cabos arrumados e fora da sua linha de visão.</li>
                <li>Ligue a alimentação a partir de um carregador ligado à ignição (ACC) para operação automática.</li>
            </ul>

            <h3>Comportamento da Alimentação</h3>
            <ul>
                <li><strong>Ignição Ligada (Alimentação Ligada):</strong> A gravação inicia automaticamente.</li>
                <li><strong>Ignição Desligada (Alimentação Perdida):</strong> A gravação pára de forma segura e os carregamentos começam (se configurados). O telemóvel permanece acordado para concluir os carregamentos e depois adormece para conservar energia.</li>
            </ul>
        </section>

        <hr>

        <section id="main-screen">
            <h2>Ecrã Principal</h2>

            <h3>Disposição do Ecrã</h3>
            <ul>
                <li><strong>Superior Esquerdo:</strong> Data e hora actuais (formato configurável nas definições)</li>
                <li><strong>Superior Direito:</strong> Botão de definições + indicador de estado de carregamento</li>
                <li><strong>Inferior Esquerdo:</strong> Coordenadas GPS, direcção da bússola e estado de gravação</li>
                <li><strong>Inferior Direito:</strong> Velocidade actual (mph ou km/h, configurável)</li>
                <li><strong>Centro:</strong> Pré-visualização da câmara ao vivo</li>
                <li><strong>Centro Direito:</strong> Botão de gravação manual (FAB)</li>
            </ul>

            <h3>Indicadores de Estado</h3>
            <ul>
                <li><strong>REC (Caixa Vermelha):</strong> Actualmente a gravar vídeo</li>
                <li><strong>AUTO (Caixa Verde):</strong> Buffer do modo AUTO em execução (aguardando impacto)</li>
                <li><strong>Botão de Gravação Manual:</strong>
                    <ul>
                        <li>Círculo vermelho (⏺) = Não está a gravar, toque para iniciar</li>
                        <li>Quadrado branco (⏹) = A gravar, toque para parar</li>
                    </ul>
                </li>
            </ul>

            <h3>Indicadores de Carregamento (Superior Direito)</h3>
            <ul>
                <li><strong>Ícone de carregamento verde (⏫):</strong> Carregamentos activos em progresso (mostra contagem)</li>
                <li><strong>Ícone de pausa laranja (⏸):</strong> Carregamentos pausados (mostra contagem, toque para abrir o Visualizador de Fila)</li>
                <li><strong>Ícone de aviso vermelho (⚠️):</strong> Erros de carregamento (mostra contagem, toque para ver erros)</li>
            </ul>

            <div class="alert alert-warning">
                <p><strong>Nota:</strong> Se vir "EMULADOR – Gravação de vídeo desactivada", está a executar num emulador Android. A gravação de vídeo requer um dispositivo físico com câmara.</p>
            </div>
        </section>

        <hr>

        <section id="recording-modes">
            <h2>Modos de Gravação</h2>

            <h3>1. AUTO (Detecção de Impacto)</h3>
            <p>Perfeito para condução quotidiana — poupa armazenamento guardando apenas momentos importantes.</p>
            <ul>
                <li>Grava segmentos contínuos de 1 minuto num buffer circular</li>
                <li>Mantém apenas os últimos 2 minutos na memória (30+ segundos garantidos pré-impacto)</li>
                <li>Quando o acelerómetro detecta impacto, a DashCam:
                    <ul>
                        <li>Preserva o buffer de 2 minutos (antes do impacto)</li>
                        <li>Grava 10 segundos adicionais (após o impacto)</li>
                        <li>Guarda a gravação completa com todos os dados de telemetria</li>
                    </ul>
                </li>
                <li><strong>Sensibilidade de Impacto:</strong> ALTA (1,5G), MÉDIA (2,0G, predefinida), BAIXA (3,0G)</li>
                <li><strong>Nome do ficheiro:</strong> <code>DashCam-20250115-143022-Impact.mp4</code></li>
                <li><strong>Comportamento de alimentação:</strong> Ignora eventos de alimentação (responde apenas a impactos)</li>
            </ul>

            <h3>2. PER_TRIP</h3>
            <p>Uma gravação contínua por ciclo de alimentação — ideal para documentação completa de viagens.</p>
            <ul>
                <li>Inicia automaticamente quando a alimentação é ligada (ignição ligada)</li>
                <li>Para quando a alimentação é desligada (ignição desligada)</li>
                <li>Atraso de debounce configurável (0-60 segundos, predefinição 10s) previne paragens durante flutuações breves de alimentação</li>
                <li>Numeração automática de viagens: examina ficheiros existentes para evitar duplicados</li>
                <li><strong>Nome do ficheiro:</strong> <code>DashCam-20250115-Trip01.mp4</code></li>
            </ul>

            <h3>3. Loop Temporizado (5/10/30 minutos)</h3>
            <p>Divide as gravações em segmentos de duração fixa para uma gestão e carregamento mais fáceis.</p>
            <ul>
                <li>Cria novo segmento a cada 5, 10 ou 30 minutos</li>
                <li>Alinha-se aos limites do relógio (ex.: modo 10 min: :00, :10, :20, :30, :40, :50)</li>
                <li>Reinicia automaticamente o próximo segmento até a alimentação ser desligada</li>
                <li>Ideal para equilibrar o tamanho do ficheiro com a conveniência do carregamento</li>
                <li><strong>Nome do ficheiro:</strong> <code>DashCam-20250115-1430.mp4</code> (arredondado ao limite do segmento)</li>
            </ul>

            <h3>4. Manual</h3>
            <p>Controlo completo — grave quando quiser.</p>
            <ul>
                <li>Toque no botão de círculo vermelho para iniciar a gravação</li>
                <li>Toque no botão de quadrado branco para parar a gravação</li>
                <li>Disponível independentemente do estado de alimentação ou outras definições</li>
                <li>Independente dos modos de gravação automáticos</li>
            </ul>

            <div class="alert alert-tip">
                <p><strong>Dica:</strong> Pode usar a gravação Manual a qualquer momento, mesmo enquanto o modo AUTO está a ser executado em segundo plano.</p>
            </div>
        </section>

        <hr>

        <section id="settings">
            <h2>Visão Geral das Definições</h2>

            <h3>Definições de Visualização</h3>
            <ul>
                <li><strong>Unidades de Velocidade:</strong> mph ou km/h</li>
                <li><strong>Formato de Data:</strong> DD/MM/AAAA, MM/DD/AAAA ou AAAA-MM-DD</li>
                <li><strong>Formato de Hora:</strong> 12 horas ou 24 horas</li>
                <li><strong>Manter Ecrã Ligado:</strong> Evita que o ecrã se desligue durante a gravação</li>
            </ul>

            <h3>Definições de Vídeo</h3>
            <ul>
                <li><strong>Qualidade de Vídeo:</strong>
                    <ul>
                        <li>720p (50 MB/min) — Viagens longas, armazenamento limitado</li>
                        <li>1080p (80 MB/min, predefinição) — Qualidade equilibrada</li>
                        <li>2160p/4K (200 MB/min) — Detalhe máximo, requer armazenamento grande</li>
                    </ul>
                </li>
            </ul>

            <h3>Definições de Gravação</h3>
            <ul>
                <li><strong>Modo de Gravação:</strong> AUTO, PER_TRIP, 5MIN, 10MIN, 30MIN</li>
                <li><strong>Sensibilidade de Impacto:</strong> ALTA (1,5G), MÉDIA (2,0G, predefinição), BAIXA (3,0G)
                    <br><em>Visível apenas no modo AUTO</em>
                </li>
                <li><strong>Localização de Armazenamento:</strong> INTERNO ou EXTERNO (cartão SD/USB)</li>
                <li><strong>Seleccionar Pasta Personalizada:</strong> Escolha o caminho de armazenamento externo (selector de pasta SAF)</li>
            </ul>

            <h3>Definições de Carregamento</h3>
            <ul>
                <li><strong>Activar Carregamento Automático:</strong> Alterna carregamentos automáticos após gravação</li>
                <li><strong>Permitir Ligações com Tráfego Medido:</strong> Activa carregamentos através de dados móveis (predefinição: apenas Wi-Fi)</li>
                <li><strong>Eliminar Após Carregamento:</strong> Remove automaticamente ficheiros locais após carregamento bem-sucedido</li>
                <li><strong>Visualizador de Fila de Carregamento:</strong> Monitoriza e gere a fila de carregamento</li>
                <li><strong>Destino de Carregamento:</strong> SMB, Google Drive ou OneDrive</li>
                <li><strong>Configuração de Destino:</strong> Veja as secções detalhadas abaixo para cada tipo</li>
            </ul>

            <h3>Gestão de Armazenamento</h3>
            <ul>
                <li><strong>Gestão Automática de Armazenamento:</strong> Elimina automaticamente as gravações mais antigas quando o armazenamento está baixo (predefinição: activado)</li>
                <li><strong>Espaço Livre Alvo:</strong> Limite configurável de 1-20 GB (predefinição: 5 GB)
                    <ul>
                        <li>Nível de AVISO: Abaixo de 3 GB livres</li>
                        <li>Nível CRÍTICO: Abaixo de 2 GB livres</li>
                    </ul>
                </li>
                <li><strong>Estado em Tempo Real:</strong> Visualização actual do espaço livre com avisos codificados por cores</li>
            </ul>

            <h3>Gestão de Energia</h3>
            <ul>
                <li><strong>Debounce de Desligamento de Alimentação:</strong> Atraso antes de parar por perda de alimentação (0-60 segundos, predefinição 10s)
                    <br><em>Previne paragens de gravação durante flutuações breves de alimentação</em>
                </li>
            </ul>

            <h3>Definições do Sistema</h3>
            <ul>
                <li><strong>Estado da Optimização da Bateria:</strong> Mostra se a aplicação está isenta de optimização da bateria</li>
                <li><strong>Abrir Definições da Bateria:</strong> Ligação directa para as definições de optimização da bateria do Android</li>
            </ul>

            <h3>Documentação Legal</h3>
            <ul>
                <li>Manual do Utilizador (este documento)</li>
                <li>Contrato de Licença de Utilizador Final (EULA)</li>
                <li>Licença de Software</li>
                <li>Política de Privacidade</li>
            </ul>
        </section>

        <hr>

        <section id="storage">
            <h2>Gestão de Armazenamento</h2>

            <h3>Localização Predefinida</h3>
            <code>/Android/data/com.dashcam.app/files/DashCam/</code>
            <p>Este é o armazenamento específico da aplicação, acessível sem permissões especiais no Android 10+.</p>

            <h3>Armazenamento Externo ou Cartão SD</h3>
            <ol>
                <li>Vá a <strong>Definições → Definições de Gravação → Localização de Armazenamento</strong>.</li>
                <li>Escolha <strong>EXTERNO</strong>.</li>
                <li>Toque em <strong>Seleccionar Pasta Personalizada</strong> e escolha o caminho do seu cartão SD ou armazenamento USB.</li>
                <li>Conceda permissão quando solicitado (Storage Access Framework).</li>
            </ol>
            <div class="alert alert-tip">
                <p><strong>Dica:</strong> O armazenamento externo é ideal para cartões SD ou pen drives USB de grande capacidade. Certifique-se de que o dispositivo de armazenamento permanece ligado durante a gravação.</p>
            </div>

            <h3>Formatos de Ficheiro e Saída</h3>
            <p>Cada gravação cria <strong>quatro ficheiros sincronizados</strong>:</p>
            <ul>
                <li><strong>.mp4</strong> — Vídeo H.264 com áudio (30 fps)</li>
                <li><strong>.srt</strong> — Legendas SubRip com GPS, velocidade, data/hora (intervalos de 1 segundo)</li>
                <li><strong>.csv</strong> — Dados de sensores: acelerómetro, giroscópio, magnetómetro, luz, pressão, proximidade (amostragem a 10 Hz)</li>
                <li><strong>.gpx</strong> — Trajecto GPS em formato GPX 1.1 XML (compatível com software de mapeamento)</li>
            </ul>

            <h3>Tamanhos de Ficheiro (Aproximados)</h3>
            <table>
                <thead>
                    <tr>
                        <th>Qualidade</th>
                        <th>MB/min</th>
                        <th>Gravação de 1 hora</th>
                        <th>Uso Recomendado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>720p</td>
                        <td>50</td>
                        <td>~3 GB</td>
                        <td>Viagens longas, armazenamento limitado</td>
                    </tr>
                    <tr>
                        <td>1080p</td>
                        <td>80</td>
                        <td>~4,8 GB</td>
                        <td>Qualidade equilibrada (predefinição)</td>
                    </tr>
                    <tr>
                        <td>2160p/4K</td>
                        <td>200</td>
                        <td>~12 GB</td>
                        <td>Detalhe máximo, armazenamento grande</td>
                    </tr>
                    <tr>
                        <td>Telemetria</td>
                        <td>&lt;0,2</td>
                        <td>&lt;12 MB</td>
                        <td>Todos os modos (negligenciável)</td>
                    </tr>
                </tbody>
            </table>

            <h3>Gestão Automática de Armazenamento</h3>
            <p>Quando a <strong>Gestão Automática de Armazenamento</strong> está activada (predefinição), a DashCam elimina automaticamente as gravações mais antigas quando o espaço livre fica abaixo do seu limite configurado.</p>
            <ul>
                <li><strong>Limite predefinido:</strong> 5 GB de espaço livre</li>
                <li><strong>Intervalo configurável:</strong> 1-20 GB</li>
                <li><strong>Comportamento de eliminação:</strong> Elimina conjuntos completos de gravação (todos os 4 ficheiros juntos), mais antigos primeiro</li>
                <li><strong>Níveis de aviso:</strong> Alertas visuais quando abaixo de 3 GB (AVISO) ou 2 GB (CRÍTICO)</li>
            </ul>
            <div class="alert alert-warning">
                <p><strong>Importante:</strong> Se desactivar a gestão automática, monitorize o armazenamento manualmente para prevenir falhas de gravação.</p>
            </div>
        </section>

        <hr>

        <section id="uploads">
            <h2>Configuração de Carregamento</h2>
            <p>A DashCam suporta carregamentos automáticos para <strong>pasta partilhada do Windows <small>(SMB/CIFS)</small></strong>, <strong>Google Drive</strong> e <strong>OneDrive</strong>. O sistema de carregamento baseado em fila apresenta repetição automática, processamento em segundo plano e monitorização em tempo real.</p>

            <h3>Activadores de Carregamento</h3>
            <p>Os carregamentos podem ser activados de três formas:</p>
            <ol>
                <li><strong>Automático (Após Gravação):</strong> Quando o carregamento automático está activado, as gravações carregam imediatamente após a conclusão</li>
                <li><strong>Todas na Fila Manual:</strong> Mude de MANUAL para modo de carregamento automático para colocar todas as gravações existentes na fila</li>
                <li><strong>Repetição em Segundo Plano:</strong> Carregamentos falhados repetem automaticamente com recuo exponencial (30s, 60s, 120s, 240s, 480s)</li>
            </ol>

            <h3>Requisitos de Rede</h3>
            <ul>
                <li><strong>Wi-Fi Recomendado:</strong> Por predefinição, os carregamentos ocorrem apenas em redes Wi-Fi</li>
                <li><strong>Permitir Medido:</strong> Active esta definição para permitir carregamentos através de dados móveis (pode incorrer em custos de dados)</li>
                <li><strong>Ligação Activa:</strong> O dispositivo deve ter conectividade à Internet durante o carregamento</li>
            </ul>

            <h3>Visualizador de Fila de Carregamento</h3>
            <p>Aceda ao Visualizador de Fila a partir de <strong>Definições → Definições de Carregamento → Visualizador de Fila de Carregamento</strong> para:</p>
            <ul>
                <li><strong>Monitorizar Progresso:</strong> Estado de carregamento em tempo real com barras de progresso</li>
                <li><strong>Pausar/Retomar:</strong> Controle o processamento de carregamento (o estado persiste entre reinícios da aplicação)</li>
                <li><strong>Repetir Erros:</strong> Repita manualmente carregamentos falhados</li>
                <li><strong>Ver Histórico:</strong> Veja gravações carregadas anteriormente</li>
                <li><strong>Recarregar:</strong> Recarregue ficheiros previamente bem-sucedidos se necessário</li>
                <li><strong>Limpar Fila:</strong> Remova todos os itens na fila e reexamine o armazenamento</li>
            </ul>

            <h3>Estados da Fila</h3>
            <ul>
                <li><strong>INACTIVO:</strong> Na fila, aguardando carregamento</li>
                <li><strong>A CARREGAR:</strong> Actualmente a transferir</li>
                <li><strong>ERRO:</strong> Falhado (para a fila, repetição manual necessária)</li>
                <li><strong>CONCLUÍDO:</strong> Carregado com sucesso (mantido no histórico)</li>
            </ul>

            <hr>

            <h3>Configuração de Pasta Partilhada do Windows <small>(SMB/CIFS)</small></h3>
            <p>Carregue gravações para o seu computador doméstico, NAS ou servidor Windows.</p>

            <h4>Passos de Configuração</h4>
            <ol>
                <li>Nas Definições, defina <strong>Tipo de Destino de Carregamento</strong> para <strong>Pasta de Rede</strong></li>
                <li>Configure os detalhes de ligação:
                    <ul>
                        <li><strong>Anfitrião:</strong> Nome de anfitrião do Windows (ex.: <code>OMEUPC</code>) ou endereço IP (ex.: <code>192.168.1.100</code>)</li>
                        <li><strong>Nome da Partilha:</strong> Nome da partilha SMB (ex.: <code>dashcam</code>)</li>
                        <li><strong>Caminho:</strong> Subpasta opcional dentro da partilha (ex.: <code>gravacoes/2025</code>)</li>
                        <li><strong>Nome de Utilizador:</strong> Nome de utilizador da conta local do Windows (opcional para acesso de convidado)</li>
                        <li><strong>Palavra-passe:</strong> Palavra-passe da conta (encriptada via Android Keystore)</li>
                    </ul>
                </li>
                <li><strong>Restrições de Rede Wi-Fi:</strong> Opcionalmente restrinja carregamentos a SSIDs Wi-Fi específicos (separados por vírgula)</li>
                <li>Active <strong>Carregamento Automático</strong> nas Definições</li>
            </ol>

            <h4>Resolução de Nome de Anfitrião NetBIOS</h4>
            <p>A DashCam suporta <strong>resolução de nomes NetBIOS</strong>, permitindo-lhe usar nomes de computador Windows em vez de endereços IP.</p>
            <ul>
                <li><strong>Requisitos:</strong> Ambos os dispositivos na mesma rede Wi-Fi, Descoberta de Rede do Windows activada</li>
                <li><strong>Exemplo:</strong> Use <code>DESKTOP-ABC123</code> em vez de <code>192.168.1.100</code></li>
                <li><strong>Recurso:</strong> Se o nome de anfitrião falhar, use o endereço IP (encontre via <code>ipconfig</code> na Linha de Comandos)</li>
            </ul>
            <blockquote><em>Nota: NetBIOS funciona principalmente com redes Windows. Utilizadores de macOS/Linux devem usar endereços IP.</em></blockquote>

            <h4>Criar uma Conta Local do Windows</h4>
            <p>O Windows 10+ requer acesso autenticado (sem partilhas de convidado):</p>
            <ol>
                <li>Prima <strong>Win + I</strong> → <strong>Contas</strong> → <strong>Família e outros utilizadores</strong></li>
                <li>Clique em <strong>Adicionar outra pessoa a este PC</strong></li>
                <li>Seleccione <strong>Não tenho as informações de início de sessão desta pessoa</strong></li>
                <li>Seleccione <strong>Adicionar um utilizador sem uma conta Microsoft</strong></li>
                <li>Crie o nome de utilizador (ex.: <code>dashcam</code>) e palavra-passe</li>
                <li>Clique com o botão direito na pasta partilhada → <strong>Propriedades</strong> → separador <strong>Partilha</strong> → <strong>Partilhar</strong></li>
                <li>Adicione o novo utilizador com permissões de <strong>Leitura/Escrita</strong></li>
                <li>Verifique também o separador <strong>Segurança</strong> e conceda permissões de Leitura/Escrita aí</li>
            </ol>

            <h4>Restrições de SSID Wi-Fi (Apenas SMB)</h4>
            <p>Previna carregamentos através de Wi-Fi público restringindo a redes específicas:</p>
            <ul>
                <li><strong>Definição:</strong> Carregar Apenas em Redes (SSIDs separados por vírgula)</li>
                <li><strong>Exemplo:</strong> <code>WiFiCasa,Escritorio5G</code></li>
                <li><strong>Comportamento:</strong> Se SSIDs configurados, os carregamentos só ocorrem quando ligado às redes listadas</li>
                <li><strong>Adição automática:</strong> A aplicação adiciona automaticamente o SSID actual ao configurar SMB pela primeira vez</li>
                <li><strong>Em Branco = Qualquer Rede:</strong> Deixe vazio para permitir carregamentos em qualquer Wi-Fi</li>
            </ul>
            <div class="alert alert-warning">
                <p><strong>Nota:</strong> As restrições de SSID aplicam-se <strong>apenas a destinos SMB</strong>. Os carregamentos do Google Drive e OneDrive funcionam em qualquer rede (serviços baseados na Internet).</p>
            </div>

            <hr>

            <h3>Configuração do Google Drive</h3>
            <p>Carregue gravações directamente para a sua conta Google Drive.</p>

            <h4>Passos de Configuração</h4>
            <ol>
                <li>Nas Definições, defina <strong>Tipo de Destino de Carregamento</strong> para <strong>Google Drive</strong></li>
                <li>Toque em <strong>Ligar Conta Google</strong></li>
                <li>Seleccione a sua conta Google no selector de contas nativo</li>
                <li>Autorize a DashCam a aceder ao Google Drive (permissão Files.ReadWrite)</li>
                <li>Configure a estrutura de pastas:
                    <ul>
                        <li><strong>Pasta Raiz:</strong> Nome da pasta principal (ex.: <code>DashCam</code>) - criada automaticamente se não existir</li>
                        <li><strong>Subpasta:</strong> Caminho de subpasta opcional (ex.: <code>2025/Janeiro</code>)</li>
                    </ul>
                </li>
                <li>Active <strong>Carregamento Automático</strong> nas Definições</li>
            </ol>

            <h4>Métodos de Carregamento</h4>
            <ul>
                <li><strong>Carregamento Multiparte:</strong> Ficheiros com menos de 5 MB carregam num pedido</li>
                <li><strong>Carregamento Retomável:</strong> Ficheiros com 5 MB e maiores carregam em pedaços de 5 MB (pode retomar se interrompido)</li>
            </ul>

            <h4>Autenticação e Segurança</h4>
            <ul>
                <li><strong>OAuth 2.0:</strong> Autenticação segura padrão da indústria</li>
                <li><strong>Armazenamento de Token:</strong> Encriptado via Android Keystore (com suporte de hardware se disponível)</li>
                <li><strong>Actualização Automática:</strong> Tokens actualizam automaticamente 5 minutos antes de expirar</li>
                <li><strong>Desligar:</strong> Toque em "Desligar Conta Google" para revogar o acesso e limpar tokens</li>
            </ul>

            <hr>

            <h3>Configuração do OneDrive</h3>
            <p>Carregue gravações para a sua conta Microsoft OneDrive.</p>

            <h4>Passos de Configuração</h4>
            <ol>
                <li>Nas Definições, defina <strong>Tipo de Destino de Carregamento</strong> para <strong>OneDrive</strong></li>
                <li>Toque em <strong>Ligar Conta Microsoft</strong></li>
                <li>Inicie sessão via fluxo OAuth 2.0 da Microsoft (abre em WebView)</li>
                <li>Autorize a DashCam a aceder ao OneDrive (permissão Files.ReadWrite)</li>
                <li>Configure a estrutura de pastas:
                    <ul>
                        <li><strong>Pasta Raiz:</strong> Nome da pasta principal (ex.: <code>DashCam</code>) - criada automaticamente se não existir</li>
                        <li><strong>Subpasta:</strong> Caminho de subpasta opcional (ex.: <code>2025/Janeiro</code>)</li>
                    </ul>
                </li>
                <li>Active <strong>Carregamento Automático</strong> nas Definições</li>
            </ol>

            <h4>Métodos de Carregamento</h4>
            <ul>
                <li><strong>Carregamento Simples:</strong> Ficheiros com menos de 4 MB carregam num pedido</li>
                <li><strong>Sessão Retomável:</strong> Ficheiros com 4 MB e maiores usam sessões de carregamento (pode retomar se interrompido)</li>
            </ul>

            <h4>Autenticação e Segurança</h4>
            <ul>
                <li><strong>OAuth 2.0:</strong> Autenticação Microsoft Graph API v1.0</li>
                <li><strong>Armazenamento de Token:</strong> Encriptado via Android Keystore (com suporte de hardware se disponível)</li>
                <li><strong>Actualização Automática:</strong> Tokens actualizam automaticamente 5 minutos antes de expirar</li>
                <li><strong>Desligar:</strong> Toque em "Desligar Conta Microsoft" para revogar o acesso e limpar tokens</li>
            </ul>

            <hr>

            <h3>Definições Gerais de Carregamento</h3>

            <h4>Eliminar Após Carregamento</h4>
            <p>Quando activado, a DashCam elimina automaticamente ficheiros locais após carregamento bem-sucedido. Isto ajuda a gerir o armazenamento automaticamente.</p>
            <ul>
                <li><strong>Segurança:</strong> Os ficheiros só são eliminados após carregamento bem-sucedido confirmado</li>
                <li><strong>Telemetria:</strong> Todos os 4 ficheiros eliminados juntos (mp4, srt, csv, gpx)</li>
                <li><strong>Rastreamento:</strong> O estado de carregamento persiste no DataStore</li>
            </ul>

            <h4>Mecanismo de Repetição</h4>
            <p>Carregamentos falhados repetem automaticamente via Android WorkManager:</p>
            <ul>
                <li><strong>Recuo Exponencial:</strong> 30s, 60s, 120s, 240s, 480s (8 minutos máx.)</li>
                <li><strong>Tentativas Máximas:</strong> 5 repetições antes de desistir</li>
                <li><strong>Restrições de Rede:</strong> Respeita política medida/apenas-Wi-Fi</li>
                <li><strong>Processamento em Segundo Plano:</strong> Funciona mesmo quando a aplicação está fechada</li>
            </ul>

            <h4>Falhas Comuns de Carregamento</h4>
            <ul>
                <li><strong>Rede Indisponível:</strong> Fila pausada, repete quando a rede está disponível</li>
                <li><strong>Incompatibilidade de SSID (SMB):</strong> Não está na rede Wi-Fi permitida</li>
                <li><strong>Autenticação Falhada:</strong> Token OAuth expirado ou credenciais inválidas</li>
                <li><strong>Destino Indisponível:</strong> Partilha SMB offline ou serviço na nuvem em baixo</li>
                <li><strong>Configuração Inválida:</strong> Definições necessárias em falta (anfitrião, partilha, conta)</li>
            </ul>

            <div class="alert alert-tip">
                <p><strong>Dica:</strong> Monitorize o estado de carregamento através do indicador superior direito no ecrã principal. Toque para abrir o Visualizador de Fila para informação detalhada.</p>
            </div>
        </section>

        <hr>

        <section id="playback">
            <h2>Visualizar Gravações</h2>

            <h3>Reprodução na Aplicação</h3>
            <p>Toque em qualquer gravação no ecrã de Gravações para visualizar com sobreposições de telemetria sincronizadas.</p>
            <ul>
                <li><strong>Reprodução de Vídeo:</strong> Leitor incorporado com controlos padrão (reproduzir/pausar, procurar, volume)</li>
                <li><strong>Legendas SRT:</strong> GPS, velocidade e sobreposições de carimbo de data/hora exibidas automaticamente (correspondência de posição)</li>
                <li><strong>Sincronização de Linha Temporal:</strong> Dados de telemetria sincronizados com reprodução de vídeo</li>
            </ul>

            <h3>Reprodução Externa</h3>
            <p>Todos os ficheiros são formatos padrão compatíveis com software externo:</p>
            <ul>
                <li><strong>Vídeo (.mp4):</strong> Reproduza em VLC, Windows Media Player, QuickTime, etc.</li>
                <li><strong>Legendas (.srt):</strong> Carregue juntamente com o vídeo na maioria dos leitores multimédia
                    <ul>
                        <li>VLC: Arraste o ficheiro .srt para o vídeo ou coloque na mesma pasta com o nome correspondente</li>
                        <li>Mostra coordenadas GPS, velocidade, data/hora como sobreposições posicionadas</li>
                    </ul>
                </li>
                <li><strong>Dados de Sensores (.csv):</strong> Abra em Excel, Google Sheets, Python/R para análise
                    <ul>
                        <li>Colunas: Carimbo de Data/Hora, Acel X/Y/Z, Giro X/Y/Z, Mag X/Y/Z, Luz, Pressão, Proximidade</li>
                        <li>Amostragem a 10 Hz (intervalos de 100ms)</li>
                    </ul>
                </li>
                <li><strong>Trajecto GPS (.gpx):</strong> Importe para software de mapeamento
                    <ul>
                        <li>Compatível com: Google Earth, Garmin BaseCamp, GPX Viewer, etc.</li>
                        <li>Formato GPX 1.1 XML com pontos de trajecto e carimbos de data/hora</li>
                    </ul>
                </li>
            </ul>

            <h3>Aceder aos Ficheiros</h3>
            <ul>
                <li><strong>Armazenamento Interno:</strong> Use uma aplicação de gestor de ficheiros ou ligue o telemóvel via USB (modo MTP)</li>
                <li><strong>Armazenamento Externo:</strong> Remova o cartão SD e insira no computador, ou use ligação USB</li>
                <li><strong>Caminho:</strong> <code>/Android/data/com.dashcam.app/files/DashCam/</code> (interno) ou o seu caminho personalizado configurado</li>
            </ul>
        </section>

        <hr>

        <section id="troubleshooting">
            <h2>Resolução de Problemas</h2>

            <h3>Problemas Comuns</h3>
            <table>
                <thead>
                    <tr>
                        <th>Problema</th>
                        <th>Possível Solução</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Sem pré-visualização de vídeo</td>
                        <td>Conceda permissão de câmara nas Definições do Android → Aplicações → DashCam → Permissões. Reinicie a aplicação.</td>
                    </tr>
                    <tr>
                        <td>GPS não adquire</td>
                        <td>Vá para o exterior para ter uma vista clara do céu. Certifique-se de que a permissão de Localização foi concedida e o GPS está activado nas definições do Android. Pode demorar 30-60s para obtenção inicial.</td>
                    </tr>
                    <tr>
                        <td>Impacto não detectado (modo AUTO)</td>
                        <td>Ajuste a sensibilidade para ALTA (1,5G) nas definições. Certifique-se de que o telemóvel está fixado de forma segura (suporte solto absorve impactos). Teste com um leve toque no suporte.</td>
                    </tr>
                    <tr>
                        <td>A gravação para inesperadamente</td>
                        <td>Verifique o espaço de armazenamento (a eliminação automática pode estar a eliminar ficheiros). Verifique se a isenção de optimização da bateria foi concedida. Verifique a definição de debounce de desligamento de alimentação.</td>
                    </tr>
                    <tr>
                        <td>A aplicação fecha quando o ecrã está desligado</td>
                        <td>Conceda isenção de optimização da bateria: Definições → Definições do Sistema → Abrir Definições da Bateria → Seleccione "Não optimizar" para a DashCam.</td>
                    </tr>
                    <tr>
                        <td>Erros de armazenamento cheio</td>
                        <td>Active a gestão automática de armazenamento nas definições. Aumente o limite de espaço livre alvo. Reduza a qualidade de vídeo. Active a eliminação após carregamento.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Resolução de Problemas de Carregamento</h3>
            <table>
                <thead>
                    <tr>
                        <th>Problema</th>
                        <th>Possível Solução</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Carregamento SMB falha</td>
                        <td>Verifique se o anfitrião/partilha/credenciais estão correctos. Certifique-se de que ambos os dispositivos estão no mesmo Wi-Fi. Verifique as restrições de SSID. Active a porta 445 na Firewall do Windows. Verifique se a conta local do Windows tem permissões de Leitura/Escrita.</td>
                    </tr>
                    <tr>
                        <td>Nome de anfitrião não encontrado (SMB)</td>
                        <td>Verifique se a Descoberta de Rede do Windows está activada. Verifique se o NetBIOS está em execução. Recorra ao endereço IP (encontre via <code>ipconfig</code> na Linha de Comandos).</td>
                    </tr>
                    <tr>
                        <td>Autenticação do Google Drive falha</td>
                        <td>Desligue e volte a ligar a conta. Verifique se a conta Google está activa. Verifique a ligação à Internet. Limpe os dados da aplicação se persistir.</td>
                    </tr>
                    <tr>
                        <td>Autenticação do OneDrive falha</td>
                        <td>Desligue e volte a ligar a conta. Verifique se a conta Microsoft está activa. Verifique a ligação à Internet. Tente um navegador diferente se o WebView falhar.</td>
                    </tr>
                    <tr>
                        <td>Carregamento preso na fila</td>
                        <td>Verifique a conectividade de rede. Verifique as definições apenas-Wi-Fi/medido. Verifique as restrições de SSID (SMB). Abra o Visualizador de Fila e verifique a mensagem de erro. Tente repetição manual.</td>
                    </tr>
                    <tr>
                        <td>Carregamentos usam dados móveis</td>
                        <td>Desactive "Permitir Ligações com Tráfego Medido" nas Definições de Carregamento. Os carregamentos só ocorrerão em Wi-Fi.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Dicas de Desempenho</h3>
            <ul>
                <li><strong>Optimização da Bateria:</strong> Desactive a optimização da bateria do Android para a DashCam (Definições → Definições do Sistema)</li>
                <li><strong>Carregador de Qualidade:</strong> Use um carregador de 2A+ para garantir alimentação estável durante a gravação e carregamento</li>
                <li><strong>Gestão de Calor:</strong> Evite exposição directa à luz solar — o sobreaquecimento pode activar limitação térmica ou encerramento</li>
                <li><strong>Desempenho de Armazenamento:</strong> Use cartões SD de alta qualidade (Classe 10, UHS-I ou melhor) para armazenamento externo</li>
                <li><strong>Desempenho de Rede:</strong> Para carregamentos SMB, use Wi-Fi de 5GHz quando disponível (velocidades de transferência mais rápidas)</li>
                <li><strong>Armazenamento Limpo:</strong> Limpe periodicamente gravações antigas manualmente ou active eliminar-após-carregamento</li>
            </ul>

            <h3>Diagnósticos Avançados</h3>
            <p>Se os problemas persistirem, verifique o Android Logcat para mensagens de erro detalhadas:</p>
            <ol>
                <li>Active as Opções de Programador (Definições → Acerca do Telemóvel → Toque em Número de Compilação 7 vezes)</li>
                <li>Active a Depuração USB (Definições → Opções de Programador)</li>
                <li>Ligue ao computador e execute: <code>adb logcat -s DashCam:*</code></li>
                <li>Procure mensagens de erro marcadas com nomes de componentes (VideoRecorder, UploadManager, etc.)</li>
            </ol>
        </section>

        <hr>

        <section id="technical">
            <h2>Especificações Técnicas</h2>

            <h3>Codificação de Vídeo</h3>
            <ul>
                <li><strong>Codec:</strong> H.264/AVC (contentor MP4)</li>
                <li><strong>Taxa de Fotogramas:</strong> 30 fps (fixo)</li>
                <li><strong>Resolução:</strong> 1280×720, 1920×1080 ou 3840×2160 (dependente do dispositivo)</li>
                <li><strong>Orientação:</strong> Horizontal (rotação de 90° para montagem em dashcam)</li>
                <li><strong>Áudio:</strong> Codec AAC, incluído em MP4</li>
            </ul>

            <h3>Sistemas de Telemetria</h3>
            <ul>
                <li><strong>Fornecedor de GPS:</strong> Google Play Services Fused Location (actualizações de 1 segundo)</li>
                <li><strong>Formato SRT:</strong> Legendas SubRip com sobreposições posicionadas (superior esquerdo, inferior esquerdo, inferior direito)</li>
                <li><strong>Amostragem CSV:</strong> 10 Hz (intervalos de 100ms) para acelerómetro, giroscópio, magnetómetro, luz, pressão, proximidade</li>
                <li><strong>Formato GPX:</strong> GPS Exchange Format 1.1 XML com pontos de trajecto e carimbos de data/hora</li>
            </ul>

            <h3>Detecção de Impacto</h3>
            <ul>
                <li><strong>Algoritmo:</strong> Magnitude do acelerómetro filtrada por passa-baixo (alfa=0,8)</li>
                <li><strong>Limiares:</strong> ALTA=1,5G (15 m/s²), MÉDIA=2,0G (20 m/s²), BAIXA=3,0G (30 m/s²)</li>
                <li><strong>Buffer:</strong> Buffer contínuo de 2 minutos (segmentos de 1 minuto), captura pós-impacto de 10 segundos</li>
                <li><strong>Taxa de Actualização:</strong> ~20ms (SENSOR_DELAY_GAME)</li>
            </ul>

            <h3>Arquitectura de Armazenamento</h3>
            <ul>
                <li><strong>Interno:</strong> API File directa para directório específico da aplicação</li>
                <li><strong>Externo:</strong> Storage Access Framework (SAF) com persistência DocumentTree</li>
                <li><strong>FileAccessManager:</strong> Camada de abstracção unificada para APIs File e DocumentFile</li>
                <li><strong>Saída de Vídeo:</strong> FileOutputOptions (interno), FileDescriptorOutputOptions (SAF externo)</li>
            </ul>

            <h3>Arquitectura de Carregamento</h3>
            <ul>
                <li><strong>SMB/CIFS:</strong> Biblioteca jcifs-ng com resolução de nomes NetBIOS</li>
                <li><strong>Google Drive:</strong> Google Sign-In API + Drive REST API v3 (multiparte <5MB, retomável ≥5MB)</li>
                <li><strong>OneDrive:</strong> Microsoft Graph API v1.0 (simples <4MB, sessão retomável ≥4MB)</li>
                <li><strong>Repetição:</strong> Android WorkManager com recuo exponencial (máx. 5 tentativas)</li>
                <li><strong>Fila:</strong> Processamento sequencial com rastreamento de progresso baseado em StateFlow</li>
            </ul>

            <h3>Segurança</h3>
            <ul>
                <li><strong>Tokens OAuth:</strong> Encriptados via EncryptedSharedPreferences + Android Keystore</li>
                <li><strong>Credenciais SMB:</strong> Encriptadas via Android Keystore (com suporte de hardware quando disponível)</li>
                <li><strong>Actualização de Token:</strong> Actualização automática 5 minutos antes de expirar</li>
                <li><strong>Permissões:</strong> CAMERA, RECORD_AUDIO, ACCESS_FINE_LOCATION, INTERNET, WAKE_LOCK, FOREGROUND_SERVICE, ACCESS_NETWORK_STATE</li>
            </ul>

            <h3>Framework e Bibliotecas</h3>
            <ul>
                <li><strong>UI:</strong> Jetpack Compose (UI declarativa)</li>
                <li><strong>Câmara:</strong> CameraX (com recurso a selector de qualidade)</li>
                <li><strong>Preferências:</strong> DataStore (Preferences + Proto)</li>
                <li><strong>Concorrência:</strong> Kotlin Coroutines + Flow</li>
                <li><strong>Reprodução Multimédia:</strong> ExoPlayer</li>
                <li><strong>Trabalho em Segundo Plano:</strong> WorkManager</li>
                <li><strong>SMB:</strong> jcifs-ng</li>
            </ul>

            <h3>Requisitos de Dispositivo</h3>
            <ul>
                <li><strong>Android Mínimo:</strong> 8.0 Oreo (API 26)</li>
                <li><strong>Android Alvo:</strong> 14 (API 34)</li>
                <li><strong>Câmara:</strong> Câmara traseira necessária (câmara frontal não suportada)</li>
                <li><strong>Sensores:</strong> GPS, acelerómetro necessários; giroscópio, magnetómetro, luz, pressão, proximidade opcionais</li>
                <li><strong>Armazenamento:</strong> Mínimo de 8 GB recomendado (16+ GB para gravação prolongada)</li>
            </ul>
        </section>

        <hr>

        <section id="limitations">
            <h2>Limitações Conhecidas</h2>

            <h3>Limitações Actuais (Beta)</h3>
            <ul>
                <li><strong>Suporte de Emulador:</strong> Gravação de vídeo desactivada em emuladores Android (limitação do CameraX). O modo apenas-telemetria funciona.</li>
                <li><strong>Compatibilidade do MediaMuxer:</strong> Pode falhar em alguns dispositivos no modo AUTO (recurso: guarda apenas o último segmento)</li>
                <li><strong>Ficheiros PER_TRIP Grandes:</strong> Viagens contínuas extremamente longas (4+ horas a 1080p) podem exceder 20 GB — certifique-se de que tem armazenamento adequado</li>
                <li><strong>Permissão de Localização Wi-Fi:</strong> O Android 10+ requer ACCESS_FINE_LOCATION para acesso a SSID (restrições Wi-Fi)</li>
            </ul>

            <h3>Considerações sobre o Microsoft OneDrive</h3>
            <ul>
                <li><strong>Expiração do Segredo de Cliente:</strong> O segredo de cliente da Microsoft expira aproximadamente em outubro de 2026</li>
                <li><strong>Impacto:</strong> A aplicação exigirá actualização ou implementação de servidor backend antes da expiração</li>
                <li><strong>Mitigação:</strong> Os utilizadores serão notificados com bastante antecedência através de actualização da aplicação</li>
            </ul>

            <h3>Funcionalidades Planeadas</h3>
            <ul>
                <li><strong>Gestão Térmica:</strong> Monitorização de temperatura e limitação de gravação (próxima prioridade)</li>
                <li><strong>Integração Dropbox:</strong> Pendente de procura dos utilizadores</li>
                <li><strong>Testes Automatizados:</strong> A infraestrutura de testes existe mas os testes ainda não foram implementados</li>
                <li><strong>Filtragem de Tipo de Ficheiro:</strong> UI para modo de carregamento TELEMETRY_ONLY (arquitectura completa)</li>
            </ul>
        </section>

        <hr>

        <section id="safety">
            <h2>Segurança e Responsabilidade</h2>
            <p>A DashCam auxilia os condutores — <strong>não</strong> é um substituto para condução segura. Siga sempre as leis locais relativas a gravação em automóvel.</p>
        </section>

        <hr>

        <section id="support">
            <h2>Suporte e Feedback</h2>
            <p>Esta é uma <strong>versão beta</strong> — estável para uso diário, com desenvolvimento activo em curso.</p>
            <ul>
                <li>Reporte problemas ou sugestões através da página GitHub do projecto.</li>
                <li>Inclua o modelo do seu telemóvel, versão do Android e uma breve descrição do problema.</li>
            </ul>
            <p><strong>Obrigado por usar a DashCam. Conduza com segurança — e grave com responsabilidade.</strong></p>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 ByteForge. Todos os direitos reservados.</p>
            <p>
                <a href="manual.html">Manual do Utilizador</a> |
                <a href="eula.html">Termos de Utilização</a> |
                <a href="license.html">Licença</a> |
                <a href="privacy-policy.html">Política de Privacidade</a>
            </p>
        </div>
    </footer>
</body>
</html>
