<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="DashCam App - Transform your Android phone into a professional dashboard camera">
    <title>DashCam App - User Manual</title>
    <link rel="icon" type="image/png" sizes="192x192" href="../../images/app-icon-192.png">
    <link rel="icon" type="image/png" sizes="96x96" href="../../images/app-icon-96.png">
    <link rel="icon" type="image/png" sizes="48x48" href="../../images/app-icon-48.png">
    <link rel="apple-touch-icon" href="../../images/app-icon-192.png">
    <link rel="stylesheet" href="../../styles.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <img src="../../images/app-icon-96.png" alt="DashCam App Icon" class="app-icon">
                <div class="header-text">
                    <h1>DashCam App — User Manual</h1>
                    <p class="subtitle">Version 1.0.0 Beta | Android 8.0+ (API 26+) | Last Updated: 30 October 2025</p>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="manual.html"  class="active">User Manual</a></li>
            <li><a href="eula.html">Terms of Use</a></li>
            <li><a href="license.html">Licence</a></li>
            <li><a href="privacy-policy.html">Privacy Policy</a></li>
        </ul>
    </nav>

    <div class="container">
        <section id="quick-start">
            <h2>Quick Start</h2>
            <ol>
                <li><strong>Install and Launch:</strong> Grant camera, microphone, and location permissions when prompted.</li>
                <li><strong>Mount Your Phone:</strong> Securely mount on your windscreen in landscape orientation, rear camera facing forward.</li>
                <li><strong>Power It Up:</strong> Connect to a power source that turns on with your car's ignition (ACC). The app automatically starts recording when power is detected and stops when power is lost.</li>
                <li><strong>Storage:</strong> Videos are saved internally by default. You can change to SD card or external storage in settings.</li>
                <li><strong>Uploads (Optional):</strong> Configure uploads to your home computer, NAS, or cloud storage (Google Drive, OneDrive) via Wi-Fi.</li>
            </ol>
        </section>

        <hr>

        <section id="introduction">
            <h2>Introduction</h2>
            <p>DashCam transforms an old Android phone into a reliable, full-featured vehicle dash camera. Designed for <strong>stability, automation, and simplicity</strong>, it automatically records when your car starts and saves or uploads your footage when it stops.</p>

            <h3>Main Features</h3>
            <ul>
                <li><strong>Automatic recording</strong> linked to ignition or impact detection</li>
                <li><strong>Impact detection</strong> with circular video buffer (saves 2 min before + 10 sec after)</li>
                <li><strong>Comprehensive telemetry:</strong> GPS, speed, and 6-axis motion sensor logging</li>
                <li><strong>Flexible uploads:</strong> Windows shared folder (SMB/CIFS) or cloud (Google Drive, OneDrive)</li>
                <li><strong>Multiple output formats:</strong> MP4 video, SRT subtitles, CSV sensor data, GPX tracks</li>
                <li><strong>Automatic storage management:</strong> Configurable auto-pruning when storage runs low</li>
                <li><strong>Queue-based uploads:</strong> Automatic retry with background processing</li>
                <li><strong>Secure credentials:</strong> Encrypted storage via Android Keystore</li>
                <li><strong>NetBIOS support:</strong> Use Windows hostnames instead of IP addresses</li>
                <li><strong>Battery optimised:</strong> Designed for continuous operation with minimal power draw</li>
                <li><strong>Zero-touch operation:</strong> Install once, drive daily — no interaction needed</li>
            </ul>
        </section>

        <hr>

        <section id="getting-started">
            <h2>Getting Started</h2>

            <h3>Permissions</h3>
            <p>Grant these permissions at first launch:</p>
            <ul>
                <li><strong>Camera</strong> – Required for video recording.</li>
                <li><strong>Microphone</strong> – For audio capture in recordings.</li>
                <li><strong>Location</strong> – For GPS coordinates, speed logging, and WiFi SSID detection (upload restrictions).</li>
                <li><strong>Storage</strong> – (Android 9 and below) For saving recordings to device.</li>
            </ul>

            <h3>Battery Optimisation</h3>
            <p>DashCam will request <strong>battery optimisation exemption</strong> on first launch. This ensures the app can:</p>
            <ul>
                <li>Continue recording when the screen is off</li>
                <li>Complete uploads after power disconnects</li>
                <li>Monitor for impacts in AUTO mode</li>
            </ul>
            <p>You can check battery optimisation status in <strong>Settings → System Settings</strong>.</p>

            <h3>Mounting Your Phone</h3>
            <ul>
                <li>Use a <strong>windscreen or dashboard mount</strong> with a stable forward view.</li>
                <li>Keep cables neat and out of your line of sight.</li>
                <li>Connect power from a charger wired to ignition (ACC) for automatic operation.</li>
            </ul>

            <h3>Power Behaviour</h3>
            <ul>
                <li><strong>Ignition On (Power Connected):</strong> Recording starts automatically.</li>
                <li><strong>Ignition Off (Power Lost):</strong> Recording stops safely and uploads begin (if configured). The phone remains awake to finish uploads, then sleeps to conserve power.</li>
            </ul>
        </section>

        <hr>

        <section id="main-screen">
            <h2>Main Screen</h2>

            <h3>Display Layout</h3>
            <ul>
                <li><strong>Top-Left:</strong> Current date and time (format configurable in settings)</li>
                <li><strong>Top-Right:</strong> Settings button + Upload status indicator</li>
                <li><strong>Bottom-Left:</strong> GPS coordinates, compass direction, and recording status</li>
                <li><strong>Bottom-Right:</strong> Current speed (mph or km/h, configurable)</li>
                <li><strong>Centre:</strong> Live camera preview</li>
                <li><strong>Centre-Right:</strong> Manual record button (FAB)</li>
            </ul>

            <h3>Status Indicators</h3>
            <ul>
                <li><strong>REC (Red Box):</strong> Currently recording video</li>
                <li><strong>AUTO (Green Box):</strong> AUTO mode buffer is running (waiting for impact)</li>
                <li><strong>Manual Record Button:</strong>
                    <ul>
                        <li>Red circle (⏺) = Not recording, tap to start</li>
                        <li>White square (⏹) = Recording, tap to stop</li>
                    </ul>
                </li>
            </ul>

            <h3>Upload Indicators (Top-Right)</h3>
            <ul>
                <li><strong>Green upload icon (⏫):</strong> Active uploads in progress (shows count)</li>
                <li><strong>Orange pause icon (⏸):</strong> Uploads paused (shows count, tap to open Queue Viewer)</li>
                <li><strong>Red warning icon (⚠️):</strong> Upload errors (shows count, tap to view errors)</li>
            </ul>

            <div class="alert alert-warning">
                <p><strong>Note:</strong> If you see "EMULATOR – Video recording disabled," you're running on an Android emulator. Video recording requires a physical device with a camera.</p>
            </div>
        </section>

        <hr>

        <section id="recording-modes">
            <h2>Recording Modes</h2>

            <h3>1. AUTO (Impact Detection)</h3>
            <p>Perfect for everyday driving — saves storage by only keeping important moments.</p>
            <ul>
                <li>Records continuous 1-minute segments to a circular buffer</li>
                <li>Keeps only the last 2 minutes in memory (30+ seconds guaranteed pre-impact)</li>
                <li>When accelerometer detects impact, DashCam:
                    <ul>
                        <li>Preserves the 2-minute buffer (before impact)</li>
                        <li>Records 10 additional seconds (after impact)</li>
                        <li>Saves complete recording with all telemetry data</li>
                    </ul>
                </li>
                <li><strong>Impact Sensitivity:</strong> HIGH (1.5G), MEDIUM (2.0G, default), LOW (3.0G)</li>
                <li><strong>Filename:</strong> <code>DashCam-20250115-143022-Impact.mp4</code></li>
                <li><strong>Power behaviour:</strong> Ignores power events (only responds to impacts)</li>
            </ul>

            <h3>2. PER_TRIP</h3>
            <p>One continuous recording per power cycle — ideal for complete trip documentation.</p>
            <ul>
                <li>Starts automatically when power connected (ignition on)</li>
                <li>Stops when power disconnected (ignition off)</li>
                <li>Configurable debounce delay (0-60 seconds, default 10s) prevents stops during brief power fluctuations</li>
                <li>Automatic trip numbering: scans existing files to avoid duplicates</li>
                <li><strong>Filename:</strong> <code>DashCam-20250115-Trip01.mp4</code></li>
            </ul>

            <h3>3. Timed Loop (5/10/30 minutes)</h3>
            <p>Splits recordings into fixed-length segments for easier management and upload.</p>
            <ul>
                <li>Creates new segment every 5, 10, or 30 minutes</li>
                <li>Aligns to clock boundaries (e.g., 10-min mode: :00, :10, :20, :30, :40, :50)</li>
                <li>Automatically restarts next segment until power disconnected</li>
                <li>Ideal for balancing file size with upload convenience</li>
                <li><strong>Filename:</strong> <code>DashCam-20250115-1430.mp4</code> (rounded to segment boundary)</li>
            </ul>

            <h3>4. Manual</h3>
            <p>Complete control — record whenever you want.</p>
            <ul>
                <li>Tap the red circle button to start recording</li>
                <li>Tap the white square button to stop recording</li>
                <li>Available regardless of power state or other settings</li>
                <li>Independent from automatic recording modes</li>
            </ul>

            <div class="alert alert-tip">
                <p><strong>Tip:</strong> You can use Manual recording anytime, even whilst AUTO mode is running in the background.</p>
            </div>
        </section>

        <hr>

        <section id="settings">
            <h2>Settings Overview</h2>

            <h3>Display Settings</h3>
            <ul>
                <li><strong>Speed Units:</strong> mph or km/h</li>
                <li><strong>Date Format:</strong> MM/DD/YYYY, DD/MM/YYYY, or YYYY-MM-DD</li>
                <li><strong>Time Format:</strong> 12-hour or 24-hour</li>
                <li><strong>Keep Screen On:</strong> Prevent screen timeout whilst recording</li>
            </ul>

            <h3>Video Settings</h3>
            <ul>
                <li><strong>Video Quality:</strong>
                    <ul>
                        <li>720p (50 MB/min) — Long drives, limited storage</li>
                        <li>1080p (80 MB/min, default) — Balanced quality</li>
                        <li>2160p/4K (200 MB/min) — Maximum detail, requires large storage</li>
                    </ul>
                </li>
            </ul>

            <h3>Recording Settings</h3>
            <ul>
                <li><strong>Recording Mode:</strong> AUTO, PER_TRIP, 5MIN, 10MIN, 30MIN</li>
                <li><strong>Impact Sensitivity:</strong> HIGH (1.5G), MEDIUM (2.0G, default), LOW (3.0G)
                    <br><em>Only visible in AUTO mode</em>
                </li>
                <li><strong>Storage Location:</strong> INTERNAL or EXTERNAL (SD card/USB)</li>
                <li><strong>Select Custom Folder:</strong> Choose external storage path (SAF folder picker)</li>
            </ul>

            <h3>Upload Settings</h3>
            <ul>
                <li><strong>Enable Auto-Upload:</strong> Toggle automatic uploads after recording</li>
                <li><strong>Allow Metered Connections:</strong> Enable uploads over cellular data (default: WiFi only)</li>
                <li><strong>Delete After Upload:</strong> Automatically remove local files after successful upload</li>
                <li><strong>Upload Queue Viewer:</strong> Monitor and manage upload queue</li>
                <li><strong>Upload Destination:</strong> SMB, Google Drive, or OneDrive</li>
                <li><strong>Destination Configuration:</strong> See detailed sections below for each type</li>
            </ul>

            <h3>Storage Management</h3>
            <ul>
                <li><strong>Auto-Manage Storage:</strong> Automatically delete oldest recordings when storage runs low (default: enabled)</li>
                <li><strong>Target Free Space:</strong> Configurable threshold 1-20 GB (default: 5 GB)
                    <ul>
                        <li>WARNING level: Below 3 GB free</li>
                        <li>CRITICAL level: Below 2 GB free</li>
                    </ul>
                </li>
                <li><strong>Real-time Status:</strong> Current free space display with colour-coded warnings</li>
            </ul>

            <h3>Power Management</h3>
            <ul>
                <li><strong>Power Disconnect Debounce:</strong> Delay before stopping on power loss (0-60 seconds, default 10s)
                    <br><em>Prevents recording stops during brief power fluctuations</em>
                </li>
            </ul>

            <h3>System Settings</h3>
            <ul>
                <li><strong>Battery Optimisation Status:</strong> Shows whether app is exempt from battery optimisation</li>
                <li><strong>Open Battery Settings:</strong> Direct link to Android battery optimisation settings</li>
            </ul>

            <h3>Legal & Documentation</h3>
            <ul>
                <li>User Manual (this document)</li>
                <li>End User Licence Agreement (EULA)</li>
                <li>Software Licence</li>
                <li>Privacy Policy</li>
            </ul>
        </section>

        <hr>

        <section id="storage">
            <h2>Storage Management</h2>

            <h3>Default Location</h3>
            <code>/Android/data/com.dashcam.app/files/DashCam/</code>
            <p>This is app-specific storage, accessible without special permissions on Android 10+.</p>

            <h3>External or SD Card Storage</h3>
            <ol>
                <li>Go to <strong>Settings → Recording Settings → Storage Location</strong>.</li>
                <li>Choose <strong>EXTERNAL</strong>.</li>
                <li>Tap <strong>Select Custom Folder</strong> and pick your SD card or USB storage path.</li>
                <li>Grant permission when prompted (Storage Access Framework).</li>
            </ol>
            <div class="alert alert-tip">
                <p><strong>Tip:</strong> External storage is ideal for large-capacity SD cards or USB drives. Ensure the storage device remains connected whilst recording.</p>
            </div>

            <h3>File Formats & Output</h3>
            <p>Each recording creates <strong>four synchronised files</strong>:</p>
            <ul>
                <li><strong>.mp4</strong> — H.264 video with audio (30 fps)</li>
                <li><strong>.srt</strong> — SubRip subtitles with GPS, speed, date/time (1-second intervals)</li>
                <li><strong>.csv</strong> — Sensor data: accelerometer, gyroscope, magnetometer, light, pressure, proximity (10 Hz sampling)</li>
                <li><strong>.gpx</strong> — GPS track in GPX 1.1 XML format (compatible with mapping software)</li>
            </ul>

            <h3>File Sizes (Approximate)</h3>
            <table>
                <thead>
                    <tr>
                        <th>Quality</th>
                        <th>MB/min</th>
                        <th>1-hour Recording</th>
                        <th>Recommended Use</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>720p</td>
                        <td>50</td>
                        <td>~3 GB</td>
                        <td>Long drives, limited storage</td>
                    </tr>
                    <tr>
                        <td>1080p</td>
                        <td>80</td>
                        <td>~4.8 GB</td>
                        <td>Balanced quality (default)</td>
                    </tr>
                    <tr>
                        <td>2160p/4K</td>
                        <td>200</td>
                        <td>~12 GB</td>
                        <td>Maximum detail, large storage</td>
                    </tr>
                    <tr>
                        <td>Telemetry</td>
                        <td>&lt;0.2</td>
                        <td>&lt;12 MB</td>
                        <td>All modes (negligible)</td>
                    </tr>
                </tbody>
            </table>

            <h3>Automatic Storage Management</h3>
            <p>When <strong>Auto-Manage Storage</strong> is enabled (default), DashCam automatically deletes the oldest recordings when free space falls below your configured threshold.</p>
            <ul>
                <li><strong>Default threshold:</strong> 5 GB free space</li>
                <li><strong>Configurable range:</strong> 1-20 GB</li>
                <li><strong>Deletion behaviour:</strong> Deletes entire recording sets (all 4 files together), oldest first</li>
                <li><strong>Warning levels:</strong> Visual alerts when below 3 GB (WARNING) or 2 GB (CRITICAL)</li>
            </ul>
            <div class="alert alert-warning">
                <p><strong>Important:</strong> If you disable auto-manage, monitor storage manually to prevent recording failures.</p>
            </div>
        </section>

        <hr>

        <section id="uploads">
            <h2>Upload Configuration</h2>
            <p>DashCam supports automatic uploads to <strong>Windows shared folder <small>(SMB/CIFS)</small></strong>, <strong>Google Drive</strong>, and <strong>OneDrive</strong>. The queue-based upload system features automatic retry, background processing, and real-time monitoring.</p>

            <h3>Upload Triggers</h3>
            <p>Uploads can be triggered in three ways:</p>
            <ol>
                <li><strong>Automatic (After Recording):</strong> When auto-upload is enabled, recordings upload immediately after completion</li>
                <li><strong>Manual Queue All:</strong> Switch from MANUAL to auto-upload mode to queue all existing recordings</li>
                <li><strong>Background Retry:</strong> Failed uploads automatically retry with exponential backoff (30s, 60s, 120s, 240s, 480s)</li>
            </ol>

            <h3>Network Requirements</h3>
            <ul>
                <li><strong>WiFi Recommended:</strong> By default, uploads only occur on WiFi networks</li>
                <li><strong>Allow Metered:</strong> Enable this setting to allow uploads over cellular data (may incur data charges)</li>
                <li><strong>Active Connection:</strong> Device must have internet connectivity during upload</li>
            </ul>

            <h3>Upload Queue Viewer</h3>
            <p>Access the Queue Viewer from <strong>Settings → Upload Settings → Upload Queue Viewer</strong> to:</p>
            <ul>
                <li><strong>Monitor Progress:</strong> Real-time upload status with progress bars</li>
                <li><strong>Pause/Resume:</strong> Control upload processing (state persists across app restarts)</li>
                <li><strong>Retry Errors:</strong> Manually retry failed uploads</li>
                <li><strong>View History:</strong> See previously uploaded recordings</li>
                <li><strong>Reupload:</strong> Re-upload previously successful files if needed</li>
                <li><strong>Clear Queue:</strong> Remove all queued items and rescan storage</li>
            </ul>

            <h3>Queue States</h3>
            <ul>
                <li><strong>IDLE:</strong> Queued, waiting to upload</li>
                <li><strong>UPLOADING:</strong> Currently transferring</li>
                <li><strong>ERROR:</strong> Failed (stops queue, manual retry required)</li>
                <li><strong>DONE:</strong> Successfully uploaded (kept in history)</li>
            </ul>

            <hr>

            <h3>Windows Shared Folder <small>(SMB/CIFS)</small> Configuration</h3>
            <p>Upload recordings to your home computer, NAS, or Windows server.</p>

            <h4>Setup Steps</h4>
            <ol>
                <li>In Settings, set <strong>Upload Destination Type</strong> to <strong>Network Folder</strong></li>
                <li>Configure connection details:
                    <ul>
                        <li><strong>Host:</strong> Windows hostname (e.g., <code>MYPC</code>) or IP address (e.g., <code>192.168.1.100</code>)</li>
                        <li><strong>Share Name:</strong> SMB share name (e.g., <code>dashcam</code>)</li>
                        <li><strong>Path:</strong> Optional subfolder within share (e.g., <code>recordings/2025</code>)</li>
                        <li><strong>Username:</strong> Windows local account username (optional for guest access)</li>
                        <li><strong>Password:</strong> Account password (encrypted via Android Keystore)</li>
                    </ul>
                </li>
                <li><strong>WiFi Network Restrictions:</strong> Optionally restrict uploads to specific WiFi SSIDs (comma-separated)</li>
                <li>Enable <strong>Auto-Upload</strong> in Settings</li>
            </ol>

            <h4>NetBIOS Hostname Resolution</h4>
            <p>DashCam supports <strong>NetBIOS name resolution</strong>, allowing you to use Windows computer names instead of IP addresses.</p>
            <ul>
                <li><strong>Requirements:</strong> Both devices on same WiFi network, Windows Network Discovery enabled</li>
                <li><strong>Example:</strong> Use <code>DESKTOP-ABC123</code> instead of <code>192.168.1.100</code></li>
                <li><strong>Fallback:</strong> If hostname fails, use IP address (find via <code>ipconfig</code> in Command Prompt)</li>
            </ul>
            <blockquote><em>Note: NetBIOS primarily works with Windows networks. macOS/Linux users should use IP addresses.</em></blockquote>

            <h4>Creating a Windows Local Account</h4>
            <p>Windows 10+ requires authenticated access (no guest shares):</p>
            <ol>
                <li>Press <strong>Win + I</strong> → <strong>Accounts</strong> → <strong>Family & other users</strong></li>
                <li>Click <strong>Add someone else to this PC</strong></li>
                <li>Select <strong>I don't have this person's sign-in information</strong></li>
                <li>Select <strong>Add a user without a Microsoft account</strong></li>
                <li>Create username (e.g., <code>dashcam</code>) and password</li>
                <li>Right-click the shared folder → <strong>Properties</strong> → <strong>Sharing</strong> tab → <strong>Share</strong></li>
                <li>Add the new user with <strong>Read/Write</strong> permissions</li>
                <li>Also check the <strong>Security</strong> tab and grant Read/Write permissions there</li>
            </ol>

            <h4>WiFi SSID Restrictions (SMB Only)</h4>
            <p>Prevent uploads over public WiFi by restricting to specific networks:</p>
            <ul>
                <li><strong>Setting:</strong> Upload Only On Networks (comma-separated SSIDs)</li>
                <li><strong>Example:</strong> <code>HomeWiFi,Office5G</code></li>
                <li><strong>Behaviour:</strong> If SSIDs configured, uploads only occur when connected to listed networks</li>
                <li><strong>Auto-add:</strong> App automatically adds current SSID when first configuring SMB</li>
                <li><strong>Blank = Any Network:</strong> Leave empty to allow uploads on any WiFi</li>
            </ul>
            <div class="alert alert-warning">
                <p><strong>Note:</strong> SSID restrictions apply <strong>only to SMB destinations</strong>. Google Drive and OneDrive uploads work on any network (internet-based services).</p>
            </div>

            <hr>

            <h3>Google Drive Configuration</h3>
            <p>Upload recordings directly to your Google Drive account.</p>

            <h4>Setup Steps</h4>
            <ol>
                <li>In Settings, set <strong>Upload Destination Type</strong> to <strong>Google Drive</strong></li>
                <li>Tap <strong>Connect Google Account</strong></li>
                <li>Select your Google account from the native account picker</li>
                <li>Authorise DashCam to access Google Drive (Files.ReadWrite permission)</li>
                <li>Configure folder structure:
                    <ul>
                        <li><strong>Root Folder:</strong> Main folder name (e.g., <code>DashCam</code>) - created automatically if doesn't exist</li>
                        <li><strong>Subfolder:</strong> Optional subfolder path (e.g., <code>2025/January</code>)</li>
                    </ul>
                </li>
                <li>Enable <strong>Auto-Upload</strong> in Settings</li>
            </ol>

            <h4>Upload Methods</h4>
            <ul>
                <li><strong>Multipart Upload:</strong> Files under 5 MB upload in one request</li>
                <li><strong>Resumable Upload:</strong> Files 5 MB and larger upload in 5 MB chunks (can resume if interrupted)</li>
            </ul>

            <h4>Authentication & Security</h4>
            <ul>
                <li><strong>OAuth 2.0:</strong> Industry-standard secure authentication</li>
                <li><strong>Token Storage:</strong> Encrypted via Android Keystore (hardware-backed if available)</li>
                <li><strong>Auto-Refresh:</strong> Tokens automatically refresh 5 minutes before expiry</li>
                <li><strong>Disconnect:</strong> Tap "Disconnect Google Account" to revoke access and clear tokens</li>
            </ul>

            <hr>

            <h3>OneDrive Configuration</h3>
            <p>Upload recordings to your Microsoft OneDrive account.</p>

            <h4>Setup Steps</h4>
            <ol>
                <li>In Settings, set <strong>Upload Destination Type</strong> to <strong>OneDrive</strong></li>
                <li>Tap <strong>Connect Microsoft Account</strong></li>
                <li>Sign in via Microsoft's OAuth 2.0 web flow (opens in WebView)</li>
                <li>Authorise DashCam to access OneDrive (Files.ReadWrite permission)</li>
                <li>Configure folder structure:
                    <ul>
                        <li><strong>Root Folder:</strong> Main folder name (e.g., <code>DashCam</code>) - created automatically if doesn't exist</li>
                        <li><strong>Subfolder:</strong> Optional subfolder path (e.g., <code>2025/January</code>)</li>
                    </ul>
                </li>
                <li>Enable <strong>Auto-Upload</strong> in Settings</li>
            </ol>

            <h4>Upload Methods</h4>
            <ul>
                <li><strong>Simple Upload:</strong> Files under 4 MB upload in one request</li>
                <li><strong>Resumable Session:</strong> Files 4 MB and larger use upload sessions (can resume if interrupted)</li>
            </ul>

            <h4>Authentication & Security</h4>
            <ul>
                <li><strong>OAuth 2.0:</strong> Microsoft Graph API v1.0 authentication</li>
                <li><strong>Token Storage:</strong> Encrypted via Android Keystore (hardware-backed if available)</li>
                <li><strong>Auto-Refresh:</strong> Tokens automatically refresh 5 minutes before expiry</li>
                <li><strong>Disconnect:</strong> Tap "Disconnect Microsoft Account" to revoke access and clear tokens</li>
            </ul>

            <hr>

            <h3>General Upload Settings</h3>

            <h4>Delete After Upload</h4>
            <p>When enabled, DashCam automatically deletes local files after successful upload. This helps manage storage automatically.</p>
            <ul>
                <li><strong>Safety:</strong> Files only deleted after confirmed successful upload</li>
                <li><strong>Telemetry:</strong> All 4 files deleted together (mp4, srt, csv, gpx)</li>
                <li><strong>Tracking:</strong> Upload status persists in DataStore</li>
            </ul>

            <h4>Retry Mechanism</h4>
            <p>Failed uploads automatically retry via Android WorkManager:</p>
            <ul>
                <li><strong>Exponential Backoff:</strong> 30s, 60s, 120s, 240s, 480s (8 minutes max)</li>
                <li><strong>Maximum Attempts:</strong> 5 retries before giving up</li>
                <li><strong>Network Constraints:</strong> Respects metered/WiFi-only policy</li>
                <li><strong>Background Processing:</strong> Works even when app is closed</li>
            </ul>

            <h4>Common Upload Failures</h4>
            <ul>
                <li><strong>Network Unavailable:</strong> Queue paused, retries when network available</li>
                <li><strong>SSID Mismatch (SMB):</strong> Not on allowed WiFi network</li>
                <li><strong>Authentication Failed:</strong> OAuth token expired or invalid credentials</li>
                <li><strong>Destination Unavailable:</strong> SMB share offline or cloud service down</li>
                <li><strong>Configuration Invalid:</strong> Missing required settings (host, share, account)</li>
            </ul>

            <div class="alert alert-tip">
                <p><strong>Tip:</strong> Monitor upload status via the top-right indicator on the main screen. Tap to open Queue Viewer for detailed information.</p>
            </div>
        </section>

        <hr>

        <section id="playback">
            <h2>Viewing Recordings</h2>

            <h3>In-App Playback</h3>
            <p>Tap any recording from the Recordings screen to view with synchronised telemetry overlays.</p>
            <ul>
                <li><strong>Video Playback:</strong> Built-in player with standard controls (play/pause, seek, volume)</li>
                <li><strong>SRT Subtitles:</strong> GPS, speed, and timestamp overlays automatically displayed (position-matched)</li>
                <li><strong>Timeline Sync:</strong> Telemetry data synchronised with video playback</li>
            </ul>

            <h3>External Playback</h3>
            <p>All files are standard formats compatible with external software:</p>
            <ul>
                <li><strong>Video (.mp4):</strong> Play in VLC, Windows Media Player, QuickTime, etc.</li>
                <li><strong>Subtitles (.srt):</strong> Load alongside video in most media players
                    <ul>
                        <li>VLC: Drag .srt file onto video or place in same folder with matching name</li>
                        <li>Shows GPS coordinates, speed, date/time as positioned overlays</li>
                    </ul>
                </li>
                <li><strong>Sensor Data (.csv):</strong> Open in Excel, Google Sheets, Python/R for analysis
                    <ul>
                        <li>Columns: Timestamp, Accel X/Y/Z, Gyro X/Y/Z, Mag X/Y/Z, Light, Pressure, Proximity</li>
                        <li>10 Hz sampling (100ms intervals)</li>
                    </ul>
                </li>
                <li><strong>GPS Track (.gpx):</strong> Import into mapping software
                    <ul>
                        <li>Compatible with: Google Earth, Garmin BaseCamp, GPX Viewer, etc.</li>
                        <li>GPX 1.1 XML format with track points and timestamps</li>
                    </ul>
                </li>
            </ul>

            <h3>Accessing Files</h3>
            <ul>
                <li><strong>Internal Storage:</strong> Use a file manager app or connect phone via USB (MTP mode)</li>
                <li><strong>External Storage:</strong> Remove SD card and insert into computer, or use USB connection</li>
                <li><strong>Path:</strong> <code>/Android/data/com.dashcam.app/files/DashCam/</code> (internal) or your configured custom path</li>
            </ul>
        </section>

        <hr>

        <section id="troubleshooting">
            <h2>Troubleshooting</h2>

            <h3>Common Issues</h3>
            <table>
                <thead>
                    <tr>
                        <th>Issue</th>
                        <th>Possible Fix</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>No video preview</td>
                        <td>Grant camera permission in Android Settings → Apps → DashCam → Permissions. Restart app.</td>
                    </tr>
                    <tr>
                        <td>GPS not acquiring</td>
                        <td>Move outdoors for clear sky view. Ensure Location permission granted and GPS enabled in Android settings. May take 30-60s for initial fix.</td>
                    </tr>
                    <tr>
                        <td>Impact not detected (AUTO mode)</td>
                        <td>Adjust sensitivity to HIGH (1.5G) in settings. Ensure phone is securely mounted (loose mount absorbs impacts). Test with gentle tap on mount.</td>
                    </tr>
                    <tr>
                        <td>Recording stops unexpectedly</td>
                        <td>Check storage space (auto-prune may be deleting files). Verify battery optimisation exemption granted. Check power disconnect debounce setting.</td>
                    </tr>
                    <tr>
                        <td>App closes when screen off</td>
                        <td>Grant battery optimisation exemption: Settings → System Settings → Open Battery Settings → Select "Don't optimise" for DashCam.</td>
                    </tr>
                    <tr>
                        <td>Storage full errors</td>
                        <td>Enable auto-manage storage in settings. Increase target free space threshold. Lower video quality. Enable delete after upload.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Upload Troubleshooting</h3>
            <table>
                <thead>
                    <tr>
                        <th>Issue</th>
                        <th>Possible Fix</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>SMB upload fails</td>
                        <td>Verify host/share/credentials correct. Ensure both devices on same WiFi. Check SSID restrictions. Enable port 445 in Windows Firewall. Verify local Windows account has Read/Write permissions.</td>
                    </tr>
                    <tr>
                        <td>Hostname not found (SMB)</td>
                        <td>Verify Windows Network Discovery enabled. Check NetBIOS is running. Fallback to IP address (find via <code>ipconfig</code> in Command Prompt).</td>
                    </tr>
                    <tr>
                        <td>Google Drive auth fails</td>
                        <td>Disconnect and reconnect account. Check Google account is active. Verify internet connection. Clear app data if persistent.</td>
                    </tr>
                    <tr>
                        <td>OneDrive auth fails</td>
                        <td>Disconnect and reconnect account. Check Microsoft account is active. Verify internet connection. Try different browser if WebView fails.</td>
                    </tr>
                    <tr>
                        <td>Upload stuck in queue</td>
                        <td>Check network connectivity. Verify WiFi-only/metered settings. Check SSID restrictions (SMB). Open Queue Viewer and check error message. Try manual retry.</td>
                    </tr>
                    <tr>
                        <td>Uploads use cellular data</td>
                        <td>Disable "Allow Metered Connections" in Upload Settings. Uploads will only occur on WiFi.</td>
                    </tr>
                </tbody>
            </table>

            <h3>Performance Tips</h3>
            <ul>
                <li><strong>Battery Optimisation:</strong> Disable Android battery optimisation for DashCam (Settings → System Settings)</li>
                <li><strong>Quality Charger:</strong> Use 2A+ charger to ensure stable power during recording and uploading</li>
                <li><strong>Heat Management:</strong> Avoid direct sunlight exposure — overheating may trigger thermal throttling or shutdown</li>
                <li><strong>Storage Performance:</strong> Use high-quality SD cards (Class 10, UHS-I or better) for external storage</li>
                <li><strong>Network Performance:</strong> For SMB uploads, use 5GHz WiFi when available (faster transfer speeds)</li>
                <li><strong>Clean Storage:</strong> Periodically clear old recordings manually or enable delete-after-upload</li>
            </ul>

            <h3>Advanced Diagnostics</h3>
            <p>If issues persist, check Android Logcat for detailed error messages:</p>
            <ol>
                <li>Enable Developer Options (Settings → About Phone → Tap Build Number 7 times)</li>
                <li>Enable USB Debugging (Settings → Developer Options)</li>
                <li>Connect to computer and run: <code>adb logcat -s DashCam:*</code></li>
                <li>Look for error messages tagged with component names (VideoRecorder, UploadManager, etc.)</li>
            </ol>
        </section>

        <hr>

        <section id="technical">
            <h2>Technical Specifications</h2>

            <h3>Video Encoding</h3>
            <ul>
                <li><strong>Codec:</strong> H.264/AVC (MP4 container)</li>
                <li><strong>Frame Rate:</strong> 30 fps (fixed)</li>
                <li><strong>Resolution:</strong> 1280×720, 1920×1080, or 3840×2160 (device-dependent)</li>
                <li><strong>Orientation:</strong> Landscape (90° rotation for dashcam mounting)</li>
                <li><strong>Audio:</strong> AAC codec, included in MP4</li>
            </ul>

            <h3>Telemetry Systems</h3>
            <ul>
                <li><strong>GPS Provider:</strong> Google Play Services Fused Location (1-second updates)</li>
                <li><strong>SRT Format:</strong> SubRip subtitles with positioned overlays (top-left, bottom-left, bottom-right)</li>
                <li><strong>CSV Sampling:</strong> 10 Hz (100ms intervals) for accelerometer, gyroscope, magnetometer, light, pressure, proximity</li>
                <li><strong>GPX Format:</strong> GPS Exchange Format 1.1 XML with track points and timestamps</li>
            </ul>

            <h3>Impact Detection</h3>
            <ul>
                <li><strong>Algorithm:</strong> Low-pass filtered accelerometer magnitude (alpha=0.8)</li>
                <li><strong>Thresholds:</strong> HIGH=1.5G (15 m/s²), MEDIUM=2.0G (20 m/s²), LOW=3.0G (30 m/s²)</li>
                <li><strong>Buffer:</strong> 2-minute rolling buffer (1-minute segments), 10-second post-impact capture</li>
                <li><strong>Update Rate:</strong> ~20ms (SENSOR_DELAY_GAME)</li>
            </ul>

            <h3>Storage Architecture</h3>
            <ul>
                <li><strong>Internal:</strong> Direct File API to app-specific directory</li>
                <li><strong>External:</strong> Storage Access Framework (SAF) with DocumentTree persistence</li>
                <li><strong>FileAccessManager:</strong> Unified abstraction layer for both File and DocumentFile APIs</li>
                <li><strong>Video Output:</strong> FileOutputOptions (internal), FileDescriptorOutputOptions (external SAF)</li>
            </ul>

            <h3>Upload Architecture</h3>
            <ul>
                <li><strong>SMB/CIFS:</strong> jcifs-ng library with NetBIOS name resolution</li>
                <li><strong>Google Drive:</strong> Google Sign-In API + Drive REST API v3 (multipart <5MB, resumable ≥5MB)</li>
                <li><strong>OneDrive:</strong> Microsoft Graph API v1.0 (simple <4MB, resumable session ≥4MB)</li>
                <li><strong>Retry:</strong> Android WorkManager with exponential backoff (5 attempts max)</li>
                <li><strong>Queue:</strong> Sequential processing with StateFlow-based progress tracking</li>
            </ul>

            <h3>Security</h3>
            <ul>
                <li><strong>OAuth Tokens:</strong> Encrypted via EncryptedSharedPreferences + Android Keystore</li>
                <li><strong>SMB Credentials:</strong> Encrypted via Android Keystore (hardware-backed when available)</li>
                <li><strong>Token Refresh:</strong> Automatic refresh 5 minutes before expiry</li>
                <li><strong>Permissions:</strong> CAMERA, RECORD_AUDIO, ACCESS_FINE_LOCATION, INTERNET, WAKE_LOCK, FOREGROUND_SERVICE, ACCESS_NETWORK_STATE</li>
            </ul>

            <h3>Framework & Libraries</h3>
            <ul>
                <li><strong>UI:</strong> Jetpack Compose (declarative UI)</li>
                <li><strong>Camera:</strong> CameraX (with quality selector fallback)</li>
                <li><strong>Preferences:</strong> DataStore (Preferences + Proto)</li>
                <li><strong>Concurrency:</strong> Kotlin Coroutines + Flow</li>
                <li><strong>Media Playback:</strong> ExoPlayer</li>
                <li><strong>Background Work:</strong> WorkManager</li>
                <li><strong>SMB:</strong> jcifs-ng</li>
            </ul>

            <h3>Device Requirements</h3>
            <ul>
                <li><strong>Minimum Android:</strong> 8.0 Oreo (API 26)</li>
                <li><strong>Target Android:</strong> 14 (API 34)</li>
                <li><strong>Camera:</strong> Back-facing camera required (front camera not supported)</li>
                <li><strong>Sensors:</strong> GPS, accelerometer required; gyroscope, magnetometer, light, pressure, proximity optional</li>
                <li><strong>Storage:</strong> Minimum 8 GB recommended (16+ GB for extended recording)</li>
            </ul>
        </section>

        <hr>

        <section id="limitations">
            <h2>Known Limitations</h2>

            <h3>Current Limitations (Beta)</h3>
            <ul>
                <li><strong>Emulator Support:</strong> Video recording disabled on Android emulators (CameraX limitation). Telemetry-only mode works.</li>
                <li><strong>MediaMuxer Compatibility:</strong> May fail on some devices in AUTO mode (fallback: saves last segment only)</li>
                <li><strong>Large PER_TRIP Files:</strong> Extremely long continuous trips (4+ hours at 1080p) may exceed 20 GB — ensure adequate storage</li>
                <li><strong>WiFi Location Permission:</strong> Android 10+ requires ACCESS_FINE_LOCATION for SSID access (WiFi restrictions)</li>
            </ul>

            <h3>Microsoft OneDrive Considerations</h3>
            <ul>
                <li><strong>Client Secret Expiration:</strong> Microsoft client secret expires approximately October 2026</li>
                <li><strong>Impact:</strong> App will require update or backend server implementation before expiration</li>
                <li><strong>Mitigation:</strong> Users will be notified well in advance via app update</li>
            </ul>

            <h3>Planned Features</h3>
            <ul>
                <li><strong>Thermal Management:</strong> Temperature monitoring and recording throttling (next priority)</li>
                <li><strong>Dropbox Integration:</strong> Pending user demand</li>
                <li><strong>Automated Testing:</strong> Test infrastructure exists but tests not yet implemented</li>
                <li><strong>File Type Filtering:</strong> UI for TELEMETRY_ONLY upload mode (architecture complete)</li>
            </ul>
        </section>

        <hr>

        <section id="safety">
            <h2>Safety & Responsibility</h2>
            <p>DashCam assists drivers — it is <strong>not</strong> a substitute for safe driving. Always follow local laws regarding in-car recording.</p>
        </section>

        <hr>

        <section id="support">
            <h2>Support & Feedback</h2>
            <p>This is a <strong>beta release</strong> — stable for daily use, with active development continuing.</p>
            <ul>
                <li>Report issues or suggestions via the project's GitHub page.</li>
                <li>Include your phone model, Android version, and a short problem description.</li>
            </ul>
            <p><strong>Thank you for using DashCam. Drive safe — and record responsibly.</strong></p>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 ByteForge. All rights reserved.</p>
            <p>
                <a href="manual.html">User Manual</a> |
                <a href="eula.html">Terms of Use</a> |
                <a href="license.html">Licence</a> |
                <a href="privacy-policy.html">Privacy Policy</a>
            </p>
        </div>
    </footer>
</body>
</html>
